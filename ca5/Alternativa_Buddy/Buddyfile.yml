- pipeline: "devops19-20_tutorial_spring_app_basic_gradle"
  trigger_mode: "ON_EVERY_PUSH"
  ref_name: "master"
  ref_type: "BRANCH"
  trigger_condition: "ALWAYS"
  actions:
  - action: "Execute: ./gradlew assemble"
    type: "BUILD"
    working_directory: "/buddy/devops-19-20-a-1191779"
    docker_image_name: "library/gradle"
    docker_image_tag: "5.4-jdk8"
    execute_commands:
    - "cd ca3/Parte2/tut_basic_gradle"
    - "echo \"Building...\""
    - "chmod +x gradlew"
    - "./gradlew assemble"
    volume_mappings:
    - "/:/buddy/devops-19-20-a-1191779"
    trigger_condition: "ALWAYS"
    shell: "BASH"
  - action: "Execute: junit build/test-results/test/*.xml"
    type: "BUILD"
    working_directory: "/buddy/devops-19-20-a-1191779"
    docker_image_name: "library/gradle"
    docker_image_tag: "5.4-jdk8"
    execute_commands:
    - "cd ca3/Parte2/tut_basic_gradle"
    - "echo 'Building...'"
    - "chmod +x gradlew"
    - "./gradlew test"
    volume_mappings:
    - "/:/buddy/devops-19-20-a-1191779"
    trigger_condition: "ALWAYS"
    shell: "BASH"
  - action: "Execute:         ])"
    type: "BUILD"
    working_directory: "/buddy/devops-19-20-a-1191779"
    docker_image_name: "library/gradle"
    docker_image_tag: "5.4-jdk8"
    execute_commands:
    - "cd ca3/Parte2/tut_basic_gradle"
    - "echo 'Publishing javadoc...'"
    - "chmod +x gradlew"
    - "./gradlew javadoc"
    volume_mappings:
    - "/:/buddy/devops-19-20-a-1191779"
    trigger_condition: "ALWAYS"
    shell: "BASH"
  - action: "Build Docker image"
    type: "DOCKERFILE"
    dockerfile_path: "ca5/Parte2/Dockerfile"
    trigger_condition: "ALWAYS"
  - action: "Push Docker image"
    type: "DOCKER_PUSH"
    login: "martalribeiro"
    password: "secure!q5jzZ2pF9Ps6CVfIOcS6sg==.kN1FUbo2/76dG8mKK4+HtA=="
    docker_image_tag: "spring_app_tut_buddy"
    repository: "martalribeiro/devops2019-2020"
    trigger_condition: "ALWAYS"
